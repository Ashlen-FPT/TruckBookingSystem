@model IEnumerable<WarehouseReservationSystem.Models.Fruit.Booking>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/NewLayout/_Layout.cshtml";
}



<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.dataTables.min.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/icheck-bootstrap/3.0.1/icheck-bootstrap.min.css" integrity="sha512-8vq2g5nHE062j3xor4XxPeZiPjmRDh6wlufQlfC6pdQ/9urJkU07NM0tEREeymP++NczacJ/Q59ul+/K2eYvcg==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<!-- Preloader -->
<div class="preloader dark-mode flex-column justify-content-center align-items-center">
    <img class="animation__wobble" src="~/Images/FPT.png" alt="AdminLTELogo" height="200" width="200">
</div>

<!-- Content Header (Page header) -->
<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0"> Monthly Reports <i class="fas fa-receipt"></i> </h1>
            </div><!-- /.col -->
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <breadcrumb></breadcrumb>
                </ol>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </div><!-- /.container-fluid -->
</div>
<!-- /.content-header -->
<!-- Main content -->
<div class="content">
    <div class="container-fluid">

        <div class="row">
            <div class="col-3" style="display: block; margin-right: auto; margin-left: auto;">
                <div class="form-group">
                    <label class="control-label">Warehouse</label>
                    <select id="Warehouse" class="form-control" asp-items="ViewBag.WarehouseId"></select>

                </div>
            </div>
        </div>

       
        <br />
        <br />


        <div id="accordion">
            <div class="card card-info">
                <div class="card-header">
                    <h4 class="card-title w-100">
                        <a class="d-block w-100" data-toggle="collapse" aria-expanded="true" href="#collapseOne">
                            Custom Reports
                        </a>
                    </h4>
                </div>
                <div id="collapseOne" class="collapse show" data-parent="#accordion">
                    <div class="card-body">

                        <br />

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="control-label"> Start Date</label>
                                    <input class="form-control" id="StartDate" type="date" value="@DateTime.Now.Date.ToString("yyyy-MM-dd")" />

                                </div>

                            </div>
                            <div class="col-md-4">


                                <div class="form-group">
                                    <label class="control-label"> End Date</label>
                                    <input class="form-control" id="EndDate" type="date" value="@DateTime.Now.Date.ToString("yyyy-MM-dd")" />

                                </div>
                            </div>

                        </div>
                        <br />

                        <div class="icheck-info icheck-inline">
                            <input onchange="RadioBtn(this)" type="radio" id="isLate" name="someGroupName" />
                            <label for="isLate">Late</label>
                        </div>
                        <div class="icheck-info icheck-inline">
                            <input onchange="RadioBtn(this)" type="radio" id="isEarly" name="someGroupName" />
                            <label for="isEarly">Early</label>
                        </div>
                        <div class="icheck-info icheck-inline">
                            <input onchange="RadioBtn(this)" type="radio" id="Unbooked" name="someGroupName" />
                            <label for="Unbooked">Unbooked</label>
                        </div>
                        <div class="icheck-info icheck-inline">
                            <input onchange="RadioBtn(this)" type="radio" id="NotArrived" name="someGroupName" />
                            <label for="NotArrived">Not Arr</label>
                        </div>




                        <a class="btn btn-sm btn-danger " style="margin:0 0 10px 15px" onclick="ClearRadioBtn()">
                            <i class="fas fa-times"></i>
                        </a>

                        <br />
                        <br />



                        <label>Remove columns</label>
                        <div class="form-group">

                            <select id="mySelect2" class="js-example-basic-multiple" style="width: 75%" name="states[]" multiple="multiple">
                                <option value="0">Booking Ref</option>
                                <option value="1">Booked Date</option>
                                <option value="2">Booked Time(Hr)</option>
                                <option value="3">Transporter</option>
                                <option value="4">Registration</option>
                                <option value="5">Trailer Reg</option>
                                <option value="6">Warehouse</option>
                                <option value="7">Exporter</option>
                                <option value="8">Num Of Plts</option>
                                <option value="9">Name</option>
                                <option value="10">Market Type</option>
                                <option value="11">Phone Number</option>
                                <option value="12">Email</option>
                                <option value="13">Status</option>
                                <option value="14">TBRN</option>
                                <option value="15">Created On</option>
                                <option value="16">TS Arrival</option>
                                <option value="17">TS Departure</option>
                                <option value="18">User At TruckStop</option>
                                <option value="19">Gate In</option>
                                <option value="20">Gate Out</option>
                                <option value="21">User At Warehouse</option>
                            </select>
                        </div>

                        <br />


                        <div class="p-4 border rounded">
                            <br />
                            <table id="Table01" class="table table-striped table-bordered table-hover" style="width:100%;">
                                <thead class="thead-dark">
                                    <tr class="table-info">
                                        <th>Booking Ref</th>
                                        <th>Booked Date</th>
                                        <th>Booked Time(Hr)</th>
                                        <th>Transporter</th>
                                        <th>Registration</th>
                                        <th>Trailer Reg</th>
                                        <th>Warehouse</th>
                                        <th>Exporter</th>
                                        <th>Num Of Plts</th>
                                        <th>Name</th>
                                        <th>Market Type</th>
                                        <th>Phone Number</th>
                                        <th>Email</th>
                                        <th>Status</th>
                                        <th>TBRN</th>
                                        <th>Created On</th>
                                        <th>TS Arrival</th>
                                        <th>TS Departure</th>
                                        <th>User At TruckStop</th>
                                        <th>Gate In</th>
                                        <th>Gate Out</th>
                                        <th>User At Warehouse</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>

                    </div>
                </div>
            </div>

            <div class="card card-dark">
                <div class="card-header">
                    <h4 class="card-title w-100">
                        <a class="d-block w-100" data-toggle="collapse" href="#collapseFour">
                            Truck Durations
                        </a>
                    </h4>
                </div>
                <div id="collapseFour" class="collapse" data-parent="#accordion">
                    <div class="card-body">



                        <br />

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="control-label"> Start Date</label>
                                    <input class="form-control" id="StartDateDur" type="date" value="@DateTime.Now.Date.ToString("yyyy-MM-dd")" />

                                </div>

                            </div>
                            <div class="col-md-4">


                                <div class="form-group">
                                    <label class="control-label"> End Date</label>
                                    <input class="form-control" id="EndDateDur" type="date" value="@DateTime.Now.Date.ToString("yyyy-MM-dd")" />

                                </div>
                            </div>

                        </div>
                        <br />




                        <div class="p-4 border rounded">
                            <br />
                            <table id="Table04" class="table table-striped table-bordered table-hover" style="width:100%; table-layout:fixed">
                                <thead class="thead-dark">
                                    <tr class="table-info">
                                        <th>Booking Ref</th>
                                        <th>Booking Date</th>
                                        <th>Booked Time(Hr)</th>
                                        <th>Transporter</th>
                                        <th>Registration</th>
                                        <th>Warehouse</th>
                                        <th>Exporter</th>
                                        <th>Num Of Plts</th>
                                        <th>Email</th>
                                        <th>TBRN</th>
                                        <th>Duration at TruckStop</th>
                                        <th>Duration To Warehouse</th>
                                        <th>Duration at Warehouse</th>
                                        <th>Created On</th>
                                        <th>TS Arrival</th>
                                        <th>TS Departure</th>
                                        <th>Gate In</th>
                                        <th>Gate Out</th>
                                    </tr>
                                </thead>
                            </table>

                        </div>


                    </div>
                </div>
            </div>
        </div>




    </div>
</div>

<script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>


<script>
    $(document).ready(function () {
        $('.js-example-basic-multiple').select2({

            width: 'resolve' // need to override the changed default
        });
    });

    $('.js-example-basic-multiple').change(function (e){

        var data = $('#mySelect2').select2('data');
        var Invisible = [];

        for (var i = 0; i < data.length; i++) {

            Invisible.push(parseInt(data[i].id));

            var column = Table01.column((data[i].id));

            column.visible(false);
        }
      

        var all = [0,1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21];
        var visible = [];

        visible = all.filter(val => !Invisible.includes(val));
        

        for (var i = 0; i < visible.length; i++) {

            

            // Get the column API object
            var column = Table01.column((visible[i]));

            column.visible(true);
        }


        
       
    });


    $('#collapseOne').on('shown.bs.collapse', function () {
        $($.fn.dataTable.tables(true)).DataTable()
            .columns.adjust();
    });
    $('#collapseFour').on('shown.bs.collapse', function () {
         $($.fn.dataTable.tables(true)).DataTable()
               .columns.adjust();
    });


    var warehouse = document.getElementById("Warehouse").value;
    var sdate = document.getElementById("StartDate").value;
    var edate = document.getElementById("EndDate").value;

    var sdatedur = document.getElementById("StartDateDur").value;
    var edatedur = document.getElementById("EndDateDur").value;

    Table01 = $("#Table01").DataTable({
        "ajax": {
            "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdate + "&EndDate=" + edate
        }, "scrollX": true,
        dom: 'Bfrtip',
        buttons: [
            'copyHtml5',
            'excelHtml5',
            'csvHtml5',
            'pdfHtml5',
            {
                text: '<i class="fas fa-redo-alt"></i>',
                action: function (e, dt, node, config) {
                    dt.ajax.reload();
                }
            }
        ],
        "columns": [
            { "data": "bookingRef", "width": "100%" },
            {
                "data": "date",
                'render': function (jsonDate) {

                    var datestr = jsonDate.toString();
                    var date = new Date(datestr.substr(0, 10));
                    var month = ("0" + (date.getMonth() + 1)).slice(-2);
                    return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                    //return date;
                }
            },
            {
                "data": "time",
                'render': function (time) {


                    return time.toString();
                    //return date;
                },
                "width": "5%"
            },
            { "data": "transporter.name", "width": "100%" },
            { "data": "registration", "width": "100%" },
            { "data": "trailerReg", "width": "100%" },
            { "data": "warehouse.name", "width": "100%" },
            { "data": "exporter.name", "width": "100%" },
            { "data": "numOfPlts", "width": "100%" },
            { "data": "name", "width": "100%" },
            { "data": "marketType.name", "width": "100%" },
            { "data": "phoneNumber", "width": "100%" },
            { "data": "email", "width": "100%" },
            { "data": "status", "width": "100%" },
            { "data": "tbrn", "width": "100%" },
            {
                "data": "createdDateUtc",
                'render': function (jsonDate) {

                    var datestr = jsonDate.toString();
                    var date = new Date(datestr.substr(0, 10));
                    var month = ("0" + (date.getMonth() + 1)).slice(-2);

                    var time = datestr.substr(11)

                    var hr = time.substr(0, 2)
                    var min = time.substr(3, 2)
                    var sec = time.substr(6, 2);

                    return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                    //return date;
                }, "width": "100%"
            },
            {
                "data": "tsArr",
                'render': function (jsonDate) {

                    var datestr = jsonDate.toString();
                    var date = new Date(datestr.substr(0, 10));
                    var month = ("0" + (date.getMonth() + 1)).slice(-2);

                    var time = datestr.substr(11)

                    var hr = time.substr(0, 2)
                    var min = time.substr(3, 2)
                    var sec = time.substr(6, 2);

                    return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                    //return date;
                }, "width": "100%"
            },
            {
                "data": "tsDep",
                'render': function (jsonDate) {

                    var datestr = jsonDate.toString();
                    var date = new Date(datestr.substr(0, 10));
                    var month = ("0" + (date.getMonth() + 1)).slice(-2);

                    var time = datestr.substr(11)

                    var hr = time.substr(0, 2)
                    var min = time.substr(3, 2)
                    var sec = time.substr(6, 2);

                    return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                    //return date;
                }, "width": "100%"
            },
            { "data": "userTruckStop", "width": "100%" },
            {
                "data": "gIn",
                'render': function (jsonDate) {

                    var datestr = jsonDate.toString();
                    var date = new Date(datestr.substr(0, 10));
                    var month = ("0" + (date.getMonth() + 1)).slice(-2);

                    var time = datestr.substr(11)

                    var hr = time.substr(0, 2)
                    var min = time.substr(3, 2)
                    var sec = time.substr(6, 2);

                    return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                    //return date;
                }, "width": "100%"
            },
            {
                "data": "gOut",
                'render': function (jsonDate) {

                    var datestr = jsonDate.toString();
                    var date = new Date(datestr.substr(0, 10));
                    var month = ("0" + (date.getMonth() + 1)).slice(-2);

                    var time = datestr.substr(11)

                    var hr = time.substr(0, 2)
                    var min = time.substr(3, 2)
                    var sec = time.substr(6, 2);

                    return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                    //return date;
                }, "width": "100%"
            },
            { "data": "userWarehouse", "width": "100%" }

        ]
    });

    function RadioBtn(element) {


        warehouse = document.getElementById("Warehouse").value;
        sdate = document.getElementById("StartDate").value;
        edate = document.getElementById("EndDate").value;
        $("#mySelect2").val([]).change();
        Table01.destroy();
        Table01 = $("#Table01").DataTable({
            "ajax": {
                "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdate + "&EndDate=" + edate + "&filter=" + element.id
            }, "scrollX": true,
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5',
                {
                    text: '<i class="fas fa-redo-alt"></i>',
                    action: function (e, dt, node, config) {
                        dt.ajax.reload();
                    }
                }
            ],
            "columns": [
                { "data": "bookingRef", "width": "100%" },
                {
                    "data": "date",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);
                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                        //return date;
                    }
                },
                {
                    "data": "time",
                    'render': function (time) {


                        return time.toString();
                        //return date;
                    },
                    "width": "5%"
                },
                { "data": "transporter.name", "width": "100%" },
                { "data": "registration", "width": "100%" },
                { "data": "trailerReg", "width": "100%" },
                { "data": "warehouse.name", "width": "100%" },
                { "data": "exporter.name", "width": "100%" },
                { "data": "numOfPlts", "width": "100%" },
                { "data": "name", "width": "100%" },
                { "data": "marketType.name", "width": "100%" },
                { "data": "phoneNumber", "width": "100%" },
                { "data": "email", "width": "100%" },
                { "data": "status", "width": "100%" },
                { "data": "tbrn", "width": "100%" },
                {
                    "data": "createdDateUtc",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsArr",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsDep",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userTruckStop", "width": "100%" },
                {
                    "data": "gIn",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "gOut",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userWarehouse", "width": "100%" }

            ]
        });


    }

    function ClearRadioBtn() {
        document.querySelector('input[name="someGroupName"]:checked').checked = false;
        $("#mySelect2").val([]).change();
        Table01.destroy();
        Table01 = $("#Table01").DataTable({
            "ajax": {
                "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdate + "&EndDate=" + edate
            }, "scrollX": true,
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5',
                {
                    text: '<i class="fas fa-redo-alt"></i>',
                    action: function (e, dt, node, config) {
                        dt.ajax.reload();
                    }
                }
            ],
            "columns": [
                { "data": "bookingRef", "width": "100%" },
                {
                    "data": "date",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);
                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                        //return date;
                    }
                },
                {
                    "data": "time",
                    'render': function (time) {


                        return time.toString();
                        //return date;
                    },
                    "width": "5%"
                },
                { "data": "transporter.name", "width": "100%" },
                { "data": "registration", "width": "100%" },
                { "data": "trailerReg", "width": "100%" },
                { "data": "warehouse.name", "width": "100%" },
                { "data": "exporter.name", "width": "100%" },
                { "data": "numOfPlts", "width": "100%" },
                { "data": "name", "width": "100%" },
                { "data": "marketType.name", "width": "100%" },
                { "data": "phoneNumber", "width": "100%" },
                { "data": "email", "width": "100%" },
                { "data": "status", "width": "100%" },
                { "data": "tbrn", "width": "100%" },
                {
                    "data": "createdDateUtc",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsArr",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsDep",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userTruckStop", "width": "100%" },
                {
                    "data": "gIn",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "gOut",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userWarehouse", "width": "100%" }

            ]
        });


    }



    $('#Warehouse').change(function () {

        var warehouse = document.getElementById("Warehouse").value;
        var sdate = document.getElementById("StartDate").value;
        var edate = document.getElementById("EndDate").value;


        console.log(document.querySelector('input[name="someGroupName"]:checked'))

        if (document.querySelector('input[name="someGroupName"]:checked') != null) {
            document.querySelector('input[name="someGroupName"]:checked').checked = false;
        }
        $("#mySelect2").val([]).change();

        Table01.destroy();


        Table01 = $("#Table01").DataTable({
            "ajax": {
                "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdate + "&EndDate=" + edate
            }, "scrollX": true,
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5',
                {
                    text: '<i class="fas fa-redo-alt"></i>',
                    action: function (e, dt, node, config) {
                        dt.ajax.reload();
                    }
                }
            ],
            "columns": [
                { "data": "bookingRef", "width": "100%" },
                {
                    "data": "date",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);
                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                        //return date;
                    }
                },
                {
                    "data": "time",
                    'render': function (time) {


                        return time.toString();
                        //return date;
                    },
                    "width": "5%"
                },
                { "data": "transporter.name", "width": "100%" },
                { "data": "registration", "width": "100%" },
                { "data": "trailerReg", "width": "100%" },
                { "data": "warehouse.name", "width": "100%" },
                { "data": "exporter.name", "width": "100%" },
                { "data": "numOfPlts", "width": "100%" },
                { "data": "name", "width": "100%" },
                { "data": "marketType.name", "width": "100%" },
                { "data": "phoneNumber", "width": "100%" },
                { "data": "email", "width": "100%" },
                { "data": "status", "width": "100%" },
                { "data": "tbrn", "width": "100%" },
                {
                    "data": "createdDateUtc",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsArr",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsDep",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userTruckStop", "width": "100%" },
                {
                    "data": "gIn",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "gOut",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userWarehouse", "width": "100%" }

            ]
        });







        var sdatedur = document.getElementById("StartDateDur").value;
        var edatedur = document.getElementById("EndDateDur").value;


        table04.destroy();
        table04 = $("#Table04").DataTable({
            "ajax": {
                "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdatedur + "&EndDate=" + edatedur
            }, "scrollX": true, dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5',
                {
                    text: '<i class="fas fa-redo-alt"></i>',
                    action: function (e, dt, node, config) {
                        dt.ajax.reload();
                    }
                }
            ],
            "columns": [
                { "data": "bookingRef", "width": "10%" },
                {
                    "data": "date",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);
                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "rowIndex",
                    'render': function (time) {


                        return time + " : 00";
                        //return date;
                    },
                    "width": "5%"
                },
                { "data": "transporter.name", "width": "10%" },
                { "data": "registration", "width": "10%" },
                { "data": "warehouse.name", "width": "10%" },
                { "data": "exporter.name", "width": "10%" },
                { "data": "numOfPlts", "width": "100%" },
                { "data": "email", "width": "10%" },

                { "data": "tbrn", "width": "100%" },
                { "data": "tsDur", "width": "10%" },
                { "data": "tsToWhDur", "width": "10%" },
                { "data": "whDur", "width": "10%" },
                {
                    "data": "createdDateUtc",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsArr",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsDep",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "gIn",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "gOut",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                }


            ]
        });


    });

    $('#StartDate').change(function () {
        var warehouse = document.getElementById("Warehouse").value;
        var sdate = document.getElementById("StartDate").value;
        var edate = document.getElementById("EndDate").value;

        if (document.querySelector('input[name="someGroupName"]:checked') != null) {
            document.querySelector('input[name="someGroupName"]:checked').checked = false;
        }


        $("#mySelect2").val([]).change();

        Table01.destroy();
        Table01 = $("#Table01").DataTable({
            "ajax": {
                "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdate + "&EndDate=" + edate
            }, "scrollX": true,
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5',
                {
                    text: '<i class="fas fa-redo-alt"></i>',
                    action: function (e, dt, node, config) {
                        dt.ajax.reload();
                    }
                }
            ],
            "columns": [
                { "data": "bookingRef", "width": "100%" },
                {
                    "data": "date",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);
                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                        //return date;
                    }
                },
                {
                    "data": "time",
                    'render': function (time) {


                        return time.toString();
                        //return date;
                    },
                    "width": "5%"
                },
                { "data": "transporter.name", "width": "100%" },
                { "data": "registration", "width": "100%" },
                { "data": "trailerReg", "width": "100%" },
                { "data": "warehouse.name", "width": "100%" },
                { "data": "exporter.name", "width": "100%" },
                { "data": "numOfPlts", "width": "100%" },
                { "data": "name", "width": "100%" },
                { "data": "marketType.name", "width": "100%" },
                { "data": "phoneNumber", "width": "100%" },
                { "data": "email", "width": "100%" },
                { "data": "status", "width": "100%" },
                { "data": "tbrn", "width": "100%" },
                {
                    "data": "createdDateUtc",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsArr",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsDep",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userTruckStop", "width": "100%" },
                {
                    "data": "gIn",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "gOut",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userWarehouse", "width": "100%" }

            ]
        });


    });

    $('#EndDate').change(function () {
        var warehouse = document.getElementById("Warehouse").value;
        var sdate = document.getElementById("StartDate").value;
        var edate = document.getElementById("EndDate").value;

        if (document.querySelector('input[name="someGroupName"]:checked') != null) {
            document.querySelector('input[name="someGroupName"]:checked').checked = false;
        }

        $("#mySelect2").val([]).change();

        Table01.destroy();
        Table01 = $("#Table01").DataTable({
            "ajax": {
                "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdate + "&EndDate=" + edate
            }, "scrollX": true,
            dom: 'Bfrtip',
            buttons: [
                'copyHtml5',
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5',
                {
                    text: '<i class="fas fa-redo-alt"></i>',
                    action: function (e, dt, node, config) {
                        dt.ajax.reload();
                    }
                }
            ],
            "columns": [
                { "data": "bookingRef", "width": "100%" },
                {
                    "data": "date",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);
                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                        //return date;
                    }
                },
                {
                    "data": "time",
                    'render': function (time) {


                        return time.toString();
                        //return date;
                    },
                    "width": "5%"
                },
                { "data": "transporter.name", "width": "100%" },
                { "data": "registration", "width": "100%" },
                { "data": "trailerReg", "width": "100%" },
                { "data": "warehouse.name", "width": "100%" },
                { "data": "exporter.name", "width": "100%" },
                { "data": "numOfPlts", "width": "100%" },
                { "data": "name", "width": "100%" },
                { "data": "marketType.name", "width": "100%" },
                { "data": "phoneNumber", "width": "100%" },
                { "data": "email", "width": "100%" },
                { "data": "status", "width": "100%" },
                { "data": "tbrn", "width": "100%" },
                {
                    "data": "createdDateUtc",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsArr",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "tsDep",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userTruckStop", "width": "100%" },
                {
                    "data": "gIn",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                {
                    "data": "gOut",
                    'render': function (jsonDate) {

                        var datestr = jsonDate.toString();
                        var date = new Date(datestr.substr(0, 10));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);

                        var time = datestr.substr(11)

                        var hr = time.substr(0, 2)
                        var min = time.substr(3, 2)
                        var sec = time.substr(6, 2);

                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                        //return date;
                    }, "width": "100%"
                },
                { "data": "userWarehouse", "width": "100%" }

            ]
        });


    });

            table04 = $("#Table04").DataTable({
                "ajax": {
                    "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdatedur + "&EndDate=" + edatedur
                }, "scrollX": true, dom: 'Bfrtip',
                buttons: [
                    'copyHtml5',
                    'excelHtml5',
                    'csvHtml5',
                    'pdfHtml5',
                    {
                        text: '<i class="fas fa-redo-alt"></i>',
                        action: function (e, dt, node, config) {
                            dt.ajax.reload();
                        }
                    }
                ],
                "columns": [
                    { "data": "bookingRef", "width": "10%" },
                    {
                        "data": "date",
                        'render': function (jsonDate) {

                            var datestr = jsonDate.toString();
                            var date = new Date(datestr.substr(0, 10));
                            var month = ("0" + (date.getMonth() + 1)).slice(-2);
                            return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                            //return date;
                        }, "width": "100%"
                    },
                    {
                        "data": "rowIndex",
                        'render': function (time) {


                            return time + " : 00";
                            //return date;
                        },
                        "width": "5%"
                    },
                    { "data": "transporter.name", "width": "10%" },
                    { "data": "registration", "width": "10%" },
                    { "data": "warehouse.name", "width": "10%" },
                    { "data": "exporter.name", "width": "10%" },
                    { "data": "numOfPlts", "width": "100%" },
                    { "data": "email", "width": "10%" },

                    { "data": "tbrn", "width": "100%" },
                    { "data": "tsDur", "width": "10%" },
                    { "data": "tsToWhDur", "width": "10%" },
                    { "data": "whDur", "width": "10%" },
                    {
                        "data": "createdDateUtc",
                        'render': function (jsonDate) {

                            var datestr = jsonDate.toString();
                            var date = new Date(datestr.substr(0, 10));
                            var month = ("0" + (date.getMonth() + 1)).slice(-2);

                            var time = datestr.substr(11)

                            var hr = time.substr(0, 2)
                            var min = time.substr(3, 2)
                            var sec = time.substr(6, 2);

                            return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                            //return date;
                        }, "width": "100%"
                    },
                    {
                        "data": "tsArr",
                        'render': function (jsonDate) {

                            var datestr = jsonDate.toString();
                            var date = new Date(datestr.substr(0, 10));
                            var month = ("0" + (date.getMonth() + 1)).slice(-2);

                            var time = datestr.substr(11)

                            var hr = time.substr(0, 2)
                            var min = time.substr(3, 2)
                            var sec = time.substr(6, 2);

                            return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                            //return date;
                        }, "width": "100%"
                    },
                    {
                        "data": "tsDep",
                        'render': function (jsonDate) {

                            var datestr = jsonDate.toString();
                            var date = new Date(datestr.substr(0, 10));
                            var month = ("0" + (date.getMonth() + 1)).slice(-2);

                            var time = datestr.substr(11)

                            var hr = time.substr(0, 2)
                            var min = time.substr(3, 2)
                            var sec = time.substr(6, 2);

                            return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                            //return date;
                        }, "width": "100%"
                    },
                    {
                        "data": "gIn",
                        'render': function (jsonDate) {

                            var datestr = jsonDate.toString();
                            var date = new Date(datestr.substr(0, 10));
                            var month = ("0" + (date.getMonth() + 1)).slice(-2);

                            var time = datestr.substr(11)

                            var hr = time.substr(0, 2)
                            var min = time.substr(3, 2)
                            var sec = time.substr(6, 2);

                            return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                            //return date;
                        }, "width": "100%"
                    },
                    {
                        "data": "gOut",
                        'render': function (jsonDate) {

                            var datestr = jsonDate.toString();
                            var date = new Date(datestr.substr(0, 10));
                            var month = ("0" + (date.getMonth() + 1)).slice(-2);

                            var time = datestr.substr(11)

                            var hr = time.substr(0, 2)
                            var min = time.substr(3, 2)
                            var sec = time.substr(6, 2);

                            return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                            //return date;
                        }, "width": "100%"
                    }


                ]
            });

            $('#StartDateDur').change(function () {
                var sdatedur = document.getElementById("StartDateDur").value;
                var edatedur = document.getElementById("EndDateDur").value;
                var warehouse = document.getElementById("Warehouse").value;


                table04.destroy();
                table04 = $("#Table04").DataTable({
                    "ajax": {
                        "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdatedur + "&EndDate=" + edatedur
                    }, "scrollX": true, dom: 'Bfrtip',
                    buttons: [
                        'copyHtml5',
                        'excelHtml5',
                        'csvHtml5',
                        'pdfHtml5',
                        {
                            text: '<i class="fas fa-redo-alt"></i>',
                            action: function (e, dt, node, config) {
                                dt.ajax.reload();
                            }
                        }
                    ],
                    "columns": [
                        { "data": "bookingRef", "width": "10%" },
                        {
                            "data": "date",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);
                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "rowIndex",
                            'render': function (time) {


                                return time + " : 00";
                                //return date;
                            },
                            "width": "5%"
                        },
                        { "data": "transporter.name", "width": "10%" },
                        { "data": "registration", "width": "10%" },
                        { "data": "warehouse.name", "width": "10%" },
                        { "data": "exporter.name", "width": "10%" },
                        { "data": "numOfPlts", "width": "100%" },
                        { "data": "email", "width": "10%" },

                        { "data": "tbrn", "width": "100%" },
                        { "data": "tsDur", "width": "10%" },
                        { "data": "tsToWhDur", "width": "10%" },
                        { "data": "whDur", "width": "10%" },
                        {
                            "data": "createdDateUtc",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "tsArr",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "tsDep",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "gIn",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "gOut",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        }


                    ]
                });



            });


            $('#EndDateDur').change(function () {
                var sdatedur = document.getElementById("StartDateDur").value;
                var edatedur = document.getElementById("EndDateDur").value;
                var warehouse = document.getElementById("Warehouse").value;


                table04.destroy();
                table04 = $("#Table04").DataTable({
                    "ajax": {
                        "url": "/FruitAnalytics/Reports/GetRpts?id=" + warehouse + "&StartDate=" + sdatedur + "&EndDate=" + edatedur
                    }, "scrollX": true, dom: 'Bfrtip',
                    buttons: [
                        'copyHtml5',
                        'excelHtml5',
                        'csvHtml5',
                        'pdfHtml5',
                        {
                            text: '<i class="fas fa-redo-alt"></i>',
                            action: function (e, dt, node, config) {
                                dt.ajax.reload();
                            }
                        }
                    ],
                    "columns": [
                        { "data": "bookingRef", "width": "10%" },
                        {
                            "data": "date",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);
                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "rowIndex",
                            'render': function (time) {


                                return time + " : 00";
                                //return date;
                            },
                            "width": "5%"
                        },
                        { "data": "transporter.name", "width": "10%" },
                        { "data": "registration", "width": "10%" },
                        { "data": "warehouse.name", "width": "10%" },
                        { "data": "exporter.name", "width": "10%" },
                        { "data": "numOfPlts", "width": "100%" },
                        { "data": "email", "width": "10%" },

                        { "data": "tbrn", "width": "100%" },
                        { "data": "tsDur", "width": "10%" },
                        { "data": "tsToWhDur", "width": "10%" },
                        { "data": "whDur", "width": "10%" },
                        {
                            "data": "createdDateUtc",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "tsArr",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "tsDep",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "gIn",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        },
                        {
                            "data": "gOut",
                            'render': function (jsonDate) {

                                var datestr = jsonDate.toString();
                                var date = new Date(datestr.substr(0, 10));
                                var month = ("0" + (date.getMonth() + 1)).slice(-2);

                                var time = datestr.substr(11)

                                var hr = time.substr(0, 2)
                                var min = time.substr(3, 2)
                                var sec = time.substr(6, 2);

                                return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear() + " " + hr + ":" + min + ":" + sec;
                                //return date;
                            }, "width": "100%"
                        }


                    ]
                });

                

            });

    $('a.toggle-vis').on('click', function (e) {
        e.preventDefault();

        // Get the column API object
        var column = Table01.column($(this).attr('data-column'));

        // Toggle the visibility
        column.visible(!column.visible());
    });


</script>